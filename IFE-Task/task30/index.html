<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>表单验证1</title>
	<script type="text/javascript">

		var oText = document.getElementsByTagName('input');	
		var oP1    = document.getElementsByTagName('p');
			//验证非中文字符
		var re     = /[^\u4e00-\u9fa5]/g;
			//验证中文字符
		var re1    = /[\u4e00-\u9fa5]/g;
			//验证所有的首空格
		var re2    = /^\s+/g;
			//验证邮箱
		var re3    = /^\w+@[0-9a-z]+\.[a-z]{2,4}$/;
			//验证手机号码
		var re4    = /^(13|15|18|14)[0-9]{9}$/;
			//验证密码
		var re5    = /^.{4,16}$/;
		//判定值
		var boo = 0;
		window.onload  = function(){
			//用户名的验证
			oText[0].onfocus = function(){
				
				oP1[0].innerHTML = "必填，长度为4~16个字符";
			} 
			oText[0].onblur =function(){
				var _this = this;
				validate_User(_this);
			}
			//邮箱验证
			oText[3].onfocus = function(){
				oP1[3].innerHTML = "请输入邮箱";
			}
			oText[3].onblur = function(){
				var _this = this;
				validate_Email(_this);
			}
			//手机验证
			oText[4].onfocus = function(){
				oP1[4].innerHTML = "请输入手机";
			}
			oText[4].onblur = function(){
				var _this = this;
				validate_Phone(_this);
			}
			//验证密码
			oText[1].onfocus = function(){
				oP1[1].innerHTML = "请输入密码";
			}
			oText[1].onblur  = function(){
				var _this = this;
				validate_password(_this);
			}
			//验证重复密码
			oText[2].onfocus = function(){
				oP1[2].innerHTML = "再次输入相同密码";
			}
			oText[2].onblur = function(){
				var _this = this;
				validate_repassword(_this);
			}
			//提交验证
			oText[5].onclick = function(){
				if (boo==5) {
					alert('验证成功');
				}
				else {
					alert('验证失败');
				}
			}
		}
		//验证重复密码
		function validate_repassword(_this){
			if(oText[2].value=='')
			{
				oP1[2].innerHTML = "重复密码不能为空";
				_this.style.border = "2px solid red";
				
			}
			else {
				if (oText[2].value==oText[1].value) {
					oP1[2].innerHTML = "密码可用"
					boo++;
					_this.style.border = "2px solid green";
				}
				else {
					oP1[2].innerHTML = "两次密码输入不相同";
					_this.style.border = "2px solid red";
					
				}
			}
			
		}
		//验证密码
		function validate_password(_this){
			if (re5.test(oText[1].value)) {
				oP1[1].innerHTML = "密码可用";
					boo++;
				_this.style.border = "2px solid green";
			}
			else{
				oP1[1].innerHTML = "密码格式错误";
				_this.style.border = "2px solid red";
				
			}
		}

		//验证邮箱
		function validate_Email(_this){
			 if (re3.test(oText[3].value)) {
			 	oP1[3].innerHTML = "邮箱格式正确";
			 		boo++;
			 	_this.style.border = "2px solid green";
			 }
			 else {
			 	oP1[3].innerHTML = "邮箱格式错误";
			 	_this.style.border = "2px solid red";
			 	
			 }
		} 
		//验证手机号码
		function validate_Phone(_this){
			  if (re4.test(oText[4].value)) {
			 	oP1[4].innerHTML = "手机格式正确";
			 		boo++;
			 	_this.style.border = "2px solid green";
			 }
			 else {
			 	oP1[4].innerHTML = "手机格式错误";
			 	_this.style.border = "2px solid red";
			 	
			 }

		}
		//用户名的验证
		function validate_User(_this){
			//保存输入数值的大小
			var oLen   = 0;
				//去掉首空格
			 var	str  = oText[0].value.replace(re2,'');
				//获取所有的非中文字符
			 var 	str1 = str.match(re);
				//获取所有的中文字符
			 var	str2 = str.match(re1);
				//获取中文字符和非中文字符的字符个数和
	oLen = (str2!=null?str2.length*2:0)+(str1!=null?str1.length:0);
				//通过所有字符的和判定
					if (oLen>=4&&oLen<=16) {
						oP1[0].innerHTML = "名称格式正确";
							boo++;
							_this.style.border = "2px solid green";
					}
					else if(oLen==0){
						oP1[0].innerHTML = "用户名不能为空";
						_this.style.border = "2px solid red";
					}
					else {
						oP1[0].innerHTML = "必填，长度必须为4~16个字符";
						_this.style.border = "2px solid red";
					}
			} 
	</script>
</head>
<body>
	名称：<input  type="text" value=""></input><br>
	<p></p>
	密码：<input  type="password" value="" ></input><br>
	<p></p>
	密码确认：<input  type="password" value="" ></input><br>
	<p></p>
    邮箱：<input  type="text" value="" ></input><br>
	<p></p>
	手机：<input  type="text" value="" ></input><br>
	<p></p>
	<input type="submit" value="提交"></input>
</body>
</html>